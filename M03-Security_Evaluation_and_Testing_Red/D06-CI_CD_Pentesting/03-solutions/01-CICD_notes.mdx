# TA Brief: Penetration Testing the CI/CD Pipeline (Jenkins, GitLab, Gitea)

Welcome to the CI/CD pentest session! This brief provides you, the Teaching Assistant (TA), with guidance on how to support students as they analyze IBC’s CI/CD pipeline for security vulnerabilities. Today’s focus is on the pipeline’s components—Jenkins, GitLab, and Gitea—and identifying misconfigurations, credential leaks, and weak access controls.

## Overview and Objectives

**Module:** CI/CD Security Assessment  
**Focus:** Identifying and Exploiting Common CI/CD Vulnerabilities in Jenkins, GitLab, and Gitea

### Learning Objectives

- **Vulnerability Recognition in CI/CD Tools:**  
  Help students discover a range of pipeline-specific flaws, such as unsecured credentials, default admin accounts, weak build job configurations, and overly permissive repository settings.

- **Impact Assessment on Delivery Pipeline:**  
  Encourage students to consider how exploited vulnerabilities could enable attackers to manipulate code, alter build artifacts, or gain unauthorized access to sensitive data (keys, tokens, credentials).

- **Practical Remediation Strategies:**  
  Guide students in proposing solutions aligned with CI/CD best practices: restricting user roles, implementing secret management solutions, enabling secure communication (TLS), and integrating security checks into the pipeline.

## Daily Schedule

- **13:30 - 13:45: Introduction to the CI/CD Pentest Exercise**

  - Recap the IBC scenario: Jenkins, GitLab, and Gitea form the CI/CD pipeline.
  - Emphasize the importance of securing build infrastructure and protecting secrets stored in the pipeline.

- **13:45 - 16:00: Vulnerability Discovery & Analysis**

  - Students explore Jenkins dashboards, GitLab repositories, and Gitea configs.
  - They should look for misconfigurations like default credentials, unsecured endpoints, outdated plugins, or missing authentication on build jobs.
  - Suggest checking for leaked tokens in build logs, environment variables, or commit histories.

- **16:00 - 16:10: Break**

- **16:10 - 17:30: Documenting Findings & Proposing Solutions**

  - Students consolidate vulnerabilities into a structured report.
  - They detail root causes (e.g., Jenkins job exposing environment variables with secrets), potential impact (e.g., attacker can push malicious code to production), and remediation steps (e.g., restrict access, use credential vaults, enforce MFA).

- **17:30 - 17:45: Q&A, Group Discussion, and Feedback**

  - Encourage students to share unique findings, such as chaining a GitLab repo misconfiguration with Jenkins job exploitation.
  - Highlight real-world CI/CD security hardening practices (e.g., GitOps with secret scanning, pipeline-as-code with security gates).

- **17:45 - 18:00: Daily Recap and Closing**
  - Summarize the day’s key insights.
  - Provide an overview of next steps, encouraging them to explore advanced CI/CD security tools and shifts towards DevSecOps.
  - Remind students to review course materials and prepare for the next session.

## TA Responsibilities

### During Vulnerability Discovery

1. **Prompt Students to Consider Various CI/CD Threats:**

   - If they focus only on known defaults, remind them to consider insecure Jenkins plugins, GitLab CI variables, or Gitea’s access tokens.
   - Encourage them to inspect pipeline logs for credential leaks or examine access controls on repositories and build jobs.

2. **Suggest Systematic Approaches:**

   - Recommend they review Jenkins’ build configuration pages for leftover secrets or scripts.
   - Guide them to examine GitLab repository settings for overly permissive permissions or hidden webhook endpoints.
   - Suggest exploring Gitea for exposed legacy repositories with hardcoded credentials.

3. **Encourage Realistic Attack Scenarios:**
   - Ask how an attacker could inject malicious code into a build stage or exfiltrate secrets from environment variables.
   - Remind them that pivoting from a Gitea account compromise to controlling Jenkins builds is a realistic scenario.

### During Documentation and Remediation Phase

- **Clarify Technical Concepts:**  
  If a student is unclear why exposed build logs with credentials matter, explain that attackers can reuse these secrets to push unauthorized code or gain admin privileges elsewhere.

- **Promote Best Practices:**  
  Encourage concrete recommendations:

  - Implement role-based access controls and least privilege.
  - Use secret management systems (e.g., Vault or sealed secrets).
  - Integrate security scanning tools into the pipeline (SAST/DAST/secret scanning).
  - Secure communication with HTTPS/TLS and disable unauthenticated endpoints.

- **Review Reports for Clarity and Completeness:**  
  Ensure each documented vulnerability includes how to reproduce it (e.g., “Access Jenkins job #42 console output and retrieve token”), its impact, and actionable remediation steps.

### General Support

- **Monitor Progress:**  
  Identify students struggling with CI/CD concepts. Explain how these tools integrate and where vulnerabilities commonly arise.

- **Foster Collaboration:**  
  Encourage students who found interesting flaws (like secret leaks in pipeline logs) to discuss their approach with others.

- **Answer Questions Precisely:**  
  Provide references to CI/CD security frameworks or DevSecOps guidelines. Keep explanations accessible—many may be less familiar with CI/CD stacks.

## Common Issues and Solutions

- **Students Only Checking Jenkins UI Defaults:**  
  Remind them to also inspect GitLab project settings, Gitea’s user permissions, and any integration points. CI/CD pipelines are about the entire chain, not just one tool.

- **Difficulty Understanding Impact:**  
  Ask them to consider how a single leaked credential could allow an attacker to deploy malicious code to production, steal sensitive data, or hijack the entire build process.

- **Vague Recommendations:**  
  If they just say “secure Jenkins,” prompt specifics: “Set up credentials in Jenkins using the Credentials store,” “Disable anonymous read access in GitLab,” or “Implement Webhooks with signed tokens in Gitea.”

## Practical Tips

The exercise is set up locally, on student machines because each student will spoil the other if they work on the same infrastructure.

Jenkins http://localhost:8080/
Username: alice
Password: alice
Gitea http://localhost:3000/
Username: thealice
Password: thealice
GitLab http://localhost:4000/
Username: alice
Password: ali12345

## Additional Tips

- **Highlight Professional Relevance:**  
  Remind students that CI/CD security is a growing concern in modern DevOps. Understanding these vulnerabilities prepares them for real-world scenarios where code integrity and pipeline security are crucial.

- **Time Management:**  
  Gently nudge students to keep pace. If stuck on Jenkins details, suggest moving to GitLab or Gitea endpoints and returning later.

- **Encourage Curiosity:**  
  Praise students who try unusual approaches, like searching commit histories in GitLab for sensitive info or examining old Gitea repositories. Encourage them to think creatively.

By following this brief, you’ll help students gain practical experience in identifying and mitigating CI/CD pipeline vulnerabilities, enhancing their understanding of DevSecOps principles and preparing them for industry challenges.
