# Introduction to CI/CD

## What you will learn in this course üßêüßê

- Dive into the world of CI/CD and understand its importance in modern software development

## What is CI/CD?

**CI/CD** stands for Continuous Integration and Continuous Delivery (or Continuous Deployment). It is a methodology used in software development to automate and streamline the process of integrating code changes, testing, and deploying applications. The goal of CI/CD is to improve the efficiency and quality of software development by enabling faster and more reliable releases.

![CICD](https://cyber-lead-assets.s3.amazonaws.com/M01-Security_Evaluation_and_Testing_(Red)/D07-CI_CD_Pentesting/01-lectures/CICD.png)

### Continuous Integration (CI)

**Continuous Integration** involves automatically integrating code changes from multiple developers into a shared repository several times a day. Each integration is verified by an automated build and tests to detect errors as early as possible. For instance, developers frequently commit their code changes to a version control system like Git. Each commit triggers an automated build process that compiles the code and runs tests to ensure the new code does not break existing functionality. CI helps catch bugs early, reduces integration issues, and ensures that the codebase remains in a deployable state.

### Continuous Delivery (CD)

**Continuous Delivery** (or Continuous Deployment) automates the release process so that the software can be deployed to production at any time, ensuring that the code is always in a release-ready state. After the CI process, the code undergoes additional testing, such as integration tests and user acceptance tests. Once these tests pass, the code is packaged and made ready for deployment to a staging or production environment. CD allows for frequent and reliable releases, reduces the risk of deployment errors, and provides quicker feedback to developers and stakeholders.

## Key Components of CI/CD

A version control system like [Git](https://git-scm.com/) stores and manages the code. Build automation tools such as [Jenkins](https://www.jenkins.io/), [Travis CI](https://www.travis-ci.com/), [CircleCI](https://circleci.com/) or [GitHub Actions](https://github.com/features/actions) compile the code and run tests. Automated testing includes unit tests, integration tests, and other tests to ensure the code functions as expected. While the principle of "pipelines" represents the various stages involved in automating this deployment. It involves tools and scripts that automate the deployment process to different environments, such as staging and production.

For example, consider a developer committing code to a Git repository. This triggers an automated build in Jenkins that compiles the code and runs unit tests. If the build and tests pass, the code is merged into the main branch. The code is then automatically deployed to a staging environment, where additional tests, such as integration and performance tests, are run. If these tests pass, the code is marked as release-ready. In a continuous deployment setup, the code would then be automatically deployed to the production environment, making it immediately available to users.

![CICD Detailled](https://cyber-lead-assets.s3.amazonaws.com/M01-Security_Evaluation_and_Testing_(Red)/D07-CI_CD_Pentesting/01-lectures/CICD_Detailled.png)

## Why you need to secure your CI/CD

Integrated security testing¬†makes life easier for development teams. Often, security is left until the end of development - the last vestige of the waterfall model. This means it can be weeks before bugs are found. At best, this means backtracking to fix them. At worst, a serious logic flaw could halt development. Testing this way is a major bottleneck.

CI/CD-integrated security systems can scan for bugs whenever new code is committed. This helps organizations make huge efficiency gains in software development. Firstly, fresh bugs are much easier and cheaper to fix than stale, ingrained ones. Secondly, fast feedback is a great way to help developers learn secure coding practices.

CI/CD pipelines are attractive targets. Malicious actors often target CI/CD pipelines to gain access to sensitive data or manipulate code to target downstream customers. From code commit to production, every stage is a possible target. Even the most secure code is vulnerable if the pipeline itself is compromised, potentially leading to the injection of malicious code into the software as was the case with the¬†[Codecov breach](https://www.zdnet.com/article/codecov-breach-impacted-hundreds-of-customer-networks/)¬†in 2021. Thousands of Codecov customers were affected after attackers exfiltrated data from the CI of a build.

These breaches cost organizations millions, erode customer trust, and have a long-lasting negative impact on a brand‚Äôs reputation. In addition, there are a number of possible attacks during the process. Here are just a few of them:

- **Frequent Code Changes**: CI/CD allows for rapid and frequent code changes, increasing the risk of introducing vulnerabilities.
- **Automated Processes**: Automated build, test, and deployment processes can be exploited if not properly secured.
- **Access and Permissions**: Developers and automation tools often need broad access to repositories and deployment environments, which can be a security risk if not managed correctly.
- **Third-Party Tools**: CI/CD pipelines often integrate with third-party tools and services, which can introduce additional vulnerabilities.

## Security Framework

### OWASP CI/CD Security Risks

The [OWASP](https://owasp.org/www-project-top-10-ci-cd-security-risks/) (Open Web Application Security Project) has identified several security risks specific to CI/CD pipelines.

Originally, the TOP 10 CI/CD Security Risks list was created by CIDER (Continuous Integration, Delivery, and Engineering Reliability), a community of DevSecOps professionals focused on improving CI/CD security. This list was then adopted as an official OWASP project by CIDER, reflecting its importance and relevance in the security community.

This list is the result of extensive research and analysis from multiple sources, including an examination of the architecture, design, and security posture of hundreds of CI/CD environments across various industries, in-depth discussions with industry experts, and publications detailing incidents and security flaws within the CI/CD security domain, with relevant examples provided.

- [CICD-SEC-1](https://owasp.org/www-project-top-10-ci-cd-security-risks/CICD-SEC-01-Insufficient-Flow-Control-Mechanisms): **Insufficient Flow Control Mechanisms**
- [CICD-SEC-2](https://owasp.org/www-project-top-10-ci-cd-security-risks/CICD-SEC-02-Inadequate-Identity-And-Access-Management): **Inadequate Identity and Access Management**
- [CICD-SEC-3](https://owasp.org/www-project-top-10-ci-cd-security-risks/CICD-SEC-03-Dependency-Chain-Abuse): **Dependency Chain Abuse**
- [CICD-SEC-4](https://owasp.org/www-project-top-10-ci-cd-security-risks/CICD-SEC-04-Poisoned-Pipeline-Execution): **Poisoned Pipeline Execution (PPE)**
- [CICD-SEC-5](https://owasp.org/www-project-top-10-ci-cd-security-risks/CICD-SEC-05-Insufficient-PBAC): **Insufficient PBAC (Pipeline-Based Access Controls)**
- [CICD-SEC-6](https://owasp.org/www-project-top-10-ci-cd-security-risks/CICD-SEC-06-Insufficient-Credential-Hygiene): **Insufficient Credential Hygiene**
- [CICD-SEC-7](https://owasp.org/www-project-top-10-ci-cd-security-risks/CICD-SEC-07-Insecure-System-Configuration): **Insecure System Configuration**
- [CICD-SEC-8](https://owasp.org/www-project-top-10-ci-cd-security-risks/CICD-SEC-08-Ungoverned-Usage-of-3rd-Party-Services): **Ungoverned Usage of Third-Party Services**
- [CICD-SEC-9](https://owasp.org/www-project-top-10-ci-cd-security-risks/CICD-SEC-09-Improper-Artifact-Integrity-Validation): **Improper Artifact Integrity Validation**
- [CICD-SEC-10](https://owasp.org/www-project-top-10-ci-cd-security-risks/CICD-SEC-10-Insufficient-Logging-And-Visibility): **Insufficient Logging and Visibility**

We will analyze each of these vulnerabilities in detail during the next course.

### CIS Software Supply Chain Benchmark

The [CIS](https://www.cisecurity.org/) (Center for Internet Security) Software Supply Chain benchmark provides a set of guidelines and best practices aimed at securing software development environments, including CI/CD pipelines. These benchmarks are designed to help organizations improve the security posture of their continuous integration and continuous delivery processes.

![CICD Integrity](https://cyber-lead-assets.s3.amazonaws.com/M01-Security_Evaluation_and_Testing_(Red)/D07-CI_CD_Pentesting/01-lectures/CICD_Integrity.png)

The CIS Software Benchmark for CI/CD pipelines focuses on the following key areas:

1. **Environment Configuration**: Ensure that the CI/CD environment is configured securely. This includes setting up secure defaults, minimizing unnecessary services, and applying the principle of least privilege to all components within the pipeline.

2. **Access Management**: Implement strict identity and access management controls. Only authorized personnel and services should have access to the CI/CD environment. Use multi-factor authentication (MFA) and ensure that access keys and credentials are stored securely, ideally in a secrets management system.

3. **Source Code Security**: Regularly scan source code repositories for vulnerabilities, sensitive data exposure, and misconfigurations. Integrate automated security testing tools to detect issues early in the development lifecycle.

4. **Dependency Management**: Monitor and manage third-party dependencies to ensure they are free from known vulnerabilities. Implement automated tools that can regularly check for updates and apply security patches to dependencies used in the pipeline.

5. **Pipeline Security**: Secure the CI/CD pipeline itself by ensuring that all scripts and build configurations are reviewed and tested. Use signed artifacts to prevent tampering, and validate the integrity of these artifacts throughout the deployment process.

6. **Audit Logging and Monitoring**: Enable comprehensive logging for all CI/CD activities. This includes tracking changes to source code, build processes, deployments, and access to sensitive components. Regularly review logs and set up alerts for suspicious activities.

7. **Incident Response**: Establish and regularly test an incident response plan tailored to CI/CD environments. This should include steps for isolating compromised components, restoring services, and communicating with stakeholders.

## Resources

- [What is CI/CD ? ](https://codefresh.io/learn/ci-cd/)
- [10 reasons why your business needs CI/CD](https://about.gitlab.com/blog/2022/02/15/ten-reasons-why-your-business-needs-ci-cd/)
